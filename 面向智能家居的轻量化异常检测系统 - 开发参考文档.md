# 面向智能家居的轻量化异常检测系统 - 开发参考文档

## 一、项目概述

### 1. 核心定位

本项目为物联网工程专业毕业设计，聚焦智能家居安全痛点，设计并实现一套适配低算力设备（家庭网关、ESP32）的轻量化异常检测解决方案，通过“数据采集→算法检测→可视化展示”全流程闭环，解决智能摄像头、门锁等核心设备的越权访问、DDoS攻击等安全威胁。

### 2. 毕设题目

**面向智能家居的轻量化异常检测算法设计与实现**

## 二、核心目标

1. **算法优化目标**：适配低算力设备，推理延迟≤100ms、内存占用≤30MB；检测F1分数≥0.85、误报率≤5%、漏报率≤3%，覆盖4类核心威胁。

2. **系统构建目标**：基于Django+Vue开发可视化系统，支持数据实时接入、异常预警、历史查询等功能，交互简洁易上手。

3. **工程落地目标**：完成“数据→算法→系统→验证”全流程，形成可演示、可复用的智能家居安全解决方案。

## 三、核心研究内容（开发核心模块）

### 1. 数据层开发：数据集构建与预处理

#### （1）数据来源

|数据类型|具体来源|占比|核心价值|
|---|---|---|---|
|公开数据集|IoT-23（优先）、CSE-CIC-IDS2019|60%|提供真实标注的攻击样本|
|模拟生成数据|Python脚本生成（Pandas/Numpy）|30%|补全场景化异常样本|
|真实采集数据|ESP32+Wireshark抓取|10%|提升数据真实性（答辩加分项）|
#### （2）预处理流程

1. 格式转换：PCAP流量（Wireshark）→ CSV格式；

2. 数据清洗：处理缺失值/异常值、去重、非数值特征编码（如协议类型）；

3. 特征工程：提取“通信层+应用层”8-10个特征，经相关性分析后保留6-8个高区分度特征；

4. 样本配比：正常样本80%+异常样本20%，总样本量≥1万条，统一为CSV格式。

### 2. 算法层开发：轻量化模型设计与优化

#### （1）核心算法选型

|算法类型|具体算法|优化方向|核心指标保障|
|---|---|---|---|
|主算法|轻量化孤立森林|决策树数量=50、树深度≤8、采样量=256|降低计算复杂度|
|补充算法|简化自编码器|网络结构：输入→4神经元→2神经元→输出|参数量＜100，适配低算力|
|对比算法|KNN、SVM|无（仅用于性能对比）|验证轻量化算法优势|
#### （2）算法融合策略

1. 前置规则过滤：用“陌生IP直接标记”“指令格式非法拦截”等简单规则过滤80%正常样本；

2. 后置模型检测：对疑似样本用孤立森林推理，提升整体检测效率。

#### （3）模型部署适配

1. 序列化存储：用Joblib/Pickle保存优化后模型，INT8量化压缩至体积＜5MB；

2. 边缘测试：在树莓派/ESP32上验证，确保单条样本推理时间≤100ms、内存≤30MB。

### 3. 应用层开发：前后端可视化系统

#### （1）技术栈与核心功能

|层级|技术栈|核心功能模块|开发要点|
|---|---|---|---|
|后端|Django 4.0+、MySQL/SQLite|数据接入接口（CSV/MQTT）、模型调用、日志存储、预警逻辑|接口响应时间≤500ms，支持批量数据处理|
|前端|Vue 3.0+、Element Plus、ECharts|安全概览、实时检测、历史日志、性能指标可视化|用WebSocket实现实时推送，图表加载流畅|
#### （2）核心页面设计

1. 首页：设备安全状态概览（正常/异常设备数量、TOP威胁类型统计饼图）；

2. 实时检测页：设备列表、实时检测结果、异常预警弹窗（含置信度与原因）；

3. 历史记录页：按时间/设备/攻击类型筛选，支持Excel导出；

4. 性能页：算法F1分数、推理延迟等指标折线图，轻量化与原始模型对比。

### 4. 感知层开发：设备模拟与数据采集（可选）

#### （1）硬件与工具

- 核心硬件：ESP32开发板（1块，≈50元）、USB数据线；

- 开发工具：Arduino IDE（烧录程序）、Wireshark（抓取Wi-Fi流量）。

#### （2）模拟设备开发

1. ESP32模拟智能摄像头/门锁，编写程序定时发送模拟数据（设备ID、时间戳、数据长度）；

2. 模拟攻击：修改程序发送频率（100ms/次模拟DDoS）、接收伪造指令。

## 四、关键技术栈明细

|开发环节|技术工具/框架|版本建议|核心用途|
|---|---|---|---|
|数据处理|Python、Pandas、Numpy|Python 3.8+|数据清洗、模拟生成|
|算法开发|Scikit-learn、TensorFlow/PyTorch|最新稳定版|模型训练、超参数调优|
|设备模拟|Arduino IDE、ESP32开发包|最新版|设备程序编写与烧录|
|流量采集|Wireshark|4.0+|抓取与转换网络流量|
|后端开发|Django、Django REST Framework|Django 4.0+|接口开发、业务逻辑处理|
|前端开发|Vue、Element Plus、ECharts|Vue 3.0+|可视化界面与图表开发|
|数据库|MySQL/SQLite|MySQL 8.0+|存储数据与检测日志|
|模型部署|Joblib、psutil|最新稳定版|模型序列化、性能监控|
## 五、系统架构与数据流向

### 1. 分层架构（自下而上）

1. **物理层**：家庭环境、攻击场景、日常操作；

2. **感知层**：智能摄像头/门锁（ESP32模拟）、家庭网关、Wi-Fi/MQTT通信；

3. **数据层**：多源数据接入、预处理流水线、特征工程；

4. **算法层**：轻量化算法模块、模型管理与边缘部署；

5. **应用层**：Django后端服务、Vue前端可视化；

6. **用户层**：家庭用户、开发人员、厂商集成方。

### 2. 核心数据流向

```mermaid
graph LR
A[ESP32/公开数据集] -->|原始流量/日志| B[数据层预处理]
B -->|特征数据| C[算法层检测]
C -->|检测结果| D[Django后端存储与处理]
D -->|API接口| E[Vue前端可视化展示]
E -->|用户操作| F[异常预警/历史查询]
```
## 六、关键资源与工具

1. **核心数据集**：

    - IoT-23官方下载：[https://www.unb.ca/cic/datasets/iotdataset-2023.html](https://www.unb.ca/cic/datasets/iotdataset-2023.html)

    - CSE-CIC-IDS2019：Kaggle搜索“CSE-CIC-IDS2019”获取简化版

2. **开发工具下载**：

    - Arduino IDE：[https://www.arduino.cc/en/Software](https://www.arduino.cc/en/Software)

    - Wireshark：[https://www.wireshark.org/download.html](https://www.wireshark.org/download.html)

3. **参考代码模板**：

    - ESP32数据发送程序、Python数据模拟脚本（可单独获取）

## 七、初步开发阶段规划（1-4周）

|阶段|时间|核心任务|交付物|
|---|---|---|---|
|1|第1周|环境搭建+数据集获取与预处理|标准化CSV数据集、开发环境配置文档|
|2|第2周|特征工程+基础模型训练（孤立森林）|特征筛选结果、初始模型文件|
|3|第3周|算法优化+边缘部署测试|轻量化模型（≤5MB）、性能测试报告|
|4|第4周|后端接口开发（数据接入+模型调用）|可调用的API接口文档|
## 八、开发注意事项

1. 数据字段统一：所有数据最终规范为“时间戳、设备ID、源IP、目的IP、协议类型、特征值、标签”等核心字段；

2. 算法轻量化优先：若模型性能不达标，先裁剪特征维度（保留≥0.1权重特征），再优化算法参数；

3. 前后端交互规范：用JSON格式传输数据，异常结果需包含“设备ID、攻击类型、置信度、时间戳”；

4. 版本控制：用Git管理代码，按“数据层→算法层→应用层”分分支开发，避免冲突。
> （注：文档部分内容可能由 AI 生成）